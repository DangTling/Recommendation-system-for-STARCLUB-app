# Songs Recommendation Service

The Songs recommendation service is implemented as a Flask app that can be communicated with through its API with several GET, POST and DELETE routes. These are listed in the OpenAPI/Swagger docs, generated by the app by running it and going to /docs, for example locally at 
`http://127.0.0.1:5000/docs`

## Service Description
The Description of the service, made specifically for use on the recommendation service, can be found in the ``https://qdrant.tech/documentation/tutorials/search-beginners/`` , which can be directly placed in the page where you could find more detail informations.


## Running this app as a Docker container

1. Have Docker installed and running.
2. Navigate to the root folder of the repository in your terminal.
3. Download the latest Qdrant image from Dockerhub: 
    ```bash
    docker pull qdrant/qdrant
    ```
4. Run the Docker image using:
    ```bash
    docker run -p 6333:6333 -v ${PWD}/qdrant_storage:/qdrant/storage qdrant/qdrant
    ```
5. Now you can access Qdrant:
    • REST API: `http://localhost:6333`
    • Web UI: `http://localhost:6333/dashboard`
    • GRPC API: `http://localhost:6334`

Please note that Qdrant starts with no encryption or authentication - "This means anyone with network access to your machine can access your Qdrant container instance". Please read [Security](https://qdrant.tech/documentation/security/) carefully for details on how to secure your instance.


## Running this app with Python outside of Docker

1. Make sure Python is installed. It is recommended to use Python 3.10 or higher.
2. Navigate to the root folder of the repository in your terminal.
3. You need to process your data so that the search engine can work with it. The Sentence Transformers framework gives you access to common Large Language Models that turn raw data into embeddings. Once encoded, this data needs to be kept somewhere. Qdrant lets you store data as embeddings. You can also use Qdrant to run search queries against this data:
    ```bash
    pip install qdrant-client pandas sqlalchemy sentence-transformers numpy flask
    ```
4. Now, let's run file `qdrant_audio.ipyb` to config your vector database. And remember adjust host, username, password, port and database firstly to fit with your database which is containing data of your app.
5. After completing the initialization of the vector database, your job now is to build the service using the Flask framework:
    ```bash
    python app.py
    ```
6. Check the restfull api to see if it works well
    • Recommend in search page: `http://127.0.0.1:5000/search` 
    ![Example1](./images/Screenshot%202024-10-11%20140450.png)

    • Recommend in home page: `http://127.0.0.1:5000/search-in-home` 
    <p style="color:red;">The parameter is a list containing the songs the user most recently listened to and there is no limit to the number of elements in the list, but I recommend leaving it at 5 elements to ensure accuracy.</p>
    ![Example1](./images/Screenshot%202024-10-11%20140640.png)

    • Add a new song: `http://127.0.0.1:5000/add_song` 
    ![Example1](./images/Screenshot%202024-10-11%20140656.png)

    • Get all vectors: `http://127.0.0.1:5000/vectors` 
    ![Example1](./images/Screenshot%202024-10-11%20140725.png)

    • Delete vector by id's vector: `http://127.0.0.1:5000/delete` 
    ![Example1](./images/Screenshot%202024-10-11%20140746.png)